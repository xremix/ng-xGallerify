<div *ngFor="let row of rows; let last = last">
  <div class="img-group">

    <div *ngFor="let image of row"
      [style.flex]="row.length == 1 ? 1 : image.ratio"
      [style.visibility]="!image.ratio ? 'hidden' : 'visible'"
      [style.max-width]="last && row.length != currentGrid.columns ? (100/currentGrid.columns)+'vw' : '100%'"
      style="position:relative;">
      <ng-container *ngTemplateOutlet="imageTemplate || defaultImageTemplate; context:{image: image}"></ng-container>
    </div>

</div>
</div>

<ng-template #defaultImageTemplate let-image="image">
  <img class="xgallerify-img" src="{{image.url}}" (load)="imageLoaded($event, image)">
</ng-template>
